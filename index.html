<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <input id="text" type="text">
  <select name="" id="typeId">
    <option value="1">1</option>
    <option value="2">2</option>
  </select>
  <button onclick="send()">添加发送</button>
</body>
<script>
  // var ws = new WebSocket("ws://localhost:3001/api/ws");
  // //连接打开时触发 
  // ws.onopen = function (evt) {
  //   console.log("Connection open ...");
  //   ws.send("Hello WebSockets!");
  // };
  // //接收到消息时触发  
  // ws.onmessage = function (evt) {
  //   console.log("Received Message: " + evt.data);
  // };
  // //连接关闭时触发  
  // ws.onclose = function (evt) {
  //   console.log("Connection closed.");
  // };

  var list = [
    "不努力的女生，会有买不完的地摊货，逛不完菜市场。努力的女生，你就没时间逛地摊，因为你只能加班叫外卖、逛淘宝。",
    "你以为有钱人很快乐吗？他们的快乐你根本想象不到！",
    "时间真的能改变一个人，比如你以前丑，现在更丑。",
    "条条大路通罗马，而有些人就住在罗马。",
    "你只看到别人在表面上活得春风得意，却不知道人家在背后也过得也风生水起。",
    "人生就像一杯水，孤独，孤独，孤独，一辈子就完了。",
    "别灰心，人生就是这样起起落落落落落落落落落落落的。",
    "长得丑就是病，不然为什么整形医院叫医院。",
    "熟练的用运“关我屁事”“关你屁事”，可以节省80%的时间。",
    "别人骂你你要听，别人夸你你别信。",
    "千万不要自己感动自己。大部分人看似的努力，不过是愚蠢导致的。",
    "不要把别人想的太坏，也不要把别人想的太好，都是凡人。",
    "漂亮的女人像是放在展柜里的工艺品，欣赏的人很多，但买下的人只能一个人。",
    "童话里的灰姑娘虽然穷，但都很漂亮，你漂亮吗？",
    "不爱你的人，比你想象中的还不爱你。",
    "失败是成功之母，可惜成功六亲不认。",
    "丑小鸭能变成白天鹅，不是因为它有多努力，而是它的父母都是白天鹅！",
    "你全心全意的付出，还不如别人的随便搞搞！",
    "从前书信很慢，车马很远，一生只够爱一个人，但是可以纳很多妾呀",
    "别减肥了，你丑并不只是因为胖。",
    "你这么通情达理，一定是因为没人疼你，没人纵容你，没人心疼你，没人惯着你。",
    "所有的工作做久了都会觉得无聊，差别在于，别人无聊还赚得比你多。",
    "想挣钱的人不少，能挣到钱的人不多。有本事的人挣钱都难，一般的人挣钱更难。",
    "酸甜苦辣是生命的富有，赤橙黄绿是人生的斑斓。",
    "上帝为你关上了一扇门，然后去洗洗睡了！",
    "生活不止眼前的苟且，还有未来的苟且。",
    "如果你不努力，就不知道什么叫绝望！",
    "转角一般不会遇到爱，只会遇到乞丐！",
    "56个民族，55个加分。",
    "万事开头难，然后中间难，最后结尾难。",
    "没有什么事用钱解决不了的，关键是没钱",
    "充电五分钟，通话两小时。可是你连通话五分钟的人都没有。",
    "你只知道人家化妆比你好看，却不知道，她们卸了妆，不仅比你好看，皮肤还吹弹可破。",
    "有时候你不努力一下，就不知道什么叫绝望。",
    "长的好看有用吗？太有用了！",
    "从哪里跌倒就在哪里躺会儿。",
    "只有真正努力过的人才知道，天赋有多重要。",
    "注重细节，从小事做起。因为你也做不了大事",
    "落魄不是你吃不上饭，不是没人理你。而是你一方面在乎别人的目光，另一方面却不知道自己的方向在哪里。",
    "不要把你的问题和伤口到处给人看，20%",
    "的人压根不在乎，80%的人庆幸你遭受了这些困难险阻。",
    "人们希望你做的更好，但一般不希望你超过他。",
    "生活和电影不一样，生活难多了。",
    "觉得自己总碰不到美好的人和事，并不是别人眼瞎老天故意整你，恰恰是因为你不够好，他们都在躲你。",
    "你总说总有一天我要干嘛干嘛，说的好像那天真会来一样。",
    "如果上天没有给你想要的，不是你值得拥有更好的，而是你不配。",
    "富人的生活千姿百态，穷人的生活大致相同。",
    "很多事确实不是所有年轻人都承受得了的，逼着你往前走的，不是前方梦想的微弱光芒，而是身后现实的深渊万丈。",
    "社会是有等级的，很多事不公平。别抱怨，因为没有用。",
    "不要太高估自己在集体中的力量，因为当你选择离开时，就会发现即使没有你，太阳照常升起！",
    "学会思考，头脑清晰，明白自己的渺小，切忌自我陶醉。枪打出头鸟，凡事莫要强出头，因为你并没有想象中的那么强！",
    "不要想着依靠别人，要有目标有追求，这与年龄无关。",
    "痛苦让人成长，是你进步的一个机会，一个挑战。别害怕痛苦的事情，它有另一面积极的作用。",
    "不要太依赖朋友，人性基本都有恶的一面。",
    "这个世界上没有永远的爱情……时间可以冲淡一切。",
    "活在当下，别在怀念过去或者憧憬未来中浪费掉你现在的生活。",
    "承诺是一件美好的事情，但美好的东西往往不会变为现实。",
    "永远不要给背叛过自己的朋友第二次的背叛的机会。",
    "偶尔也要现实和虚伪一点，因为不那样做的话，很难混。",
    "学会宽容伤害自己的人，因为他们很可怜，各人都有自己的难处，大家都不容易。",
    "你没那么多观众，别那么累。",
    "现在很痛苦，等过阵子回头看看，会发现其实那都不算事。",
    "博士越来越多，博学的越来越少；钻营的越来越多，钻研的越来越少。",
    "做梦梦到自己在考试，然后被吓醒。发现自己真的在考试。",
    "比你优秀的人都在努力，那你努力还有什么用呢？",
    "努力不一定会成功，但是不努力一定很舒服！",
    "做不到的事情，就别努力去做了。",
    "做梦梦到自己特别穷，醒来发现也不是梦。",
    "失恋的时候以为全世界都抛弃了自己，结果其实世界从没需要过你。",
    "就算大雨让整座城市倾倒，上班照样会被算做迟到。",
    "据说爱笑的女孩儿，鱼尾纹都不会少！",
    "谁说你不会乐器的，你退堂鼓打的可好了呢。",
    "有时候觉得自己特别平凡，是个普通人，别担心，你其实也可以特别的，就是做一个特别普通的人。",
    "有人说生活如人饮水冷暖自知，不需要去抱怨。我想问如果你被开水烫一下难道不会大叫吗？",
    "当你真正努力了就会知道，智商上的差距是不可逾越的！",
    "虽然你单身，但是你胖若两人。",
    "好女孩只得到了好字，而漂亮女孩却得到了所有。",
    "好人成佛要经历九九八十一难，而坏人只需放下屠刀。",
    "只要坚持下去，你就发现幸运一定会发生在别人身上。",
    "生活不止眼前的苟且，还有前任的喜帖",
    "女追男隔层纱，除非那男的本来就对你有好感，不然隔的基本都是铁丝网，还是带电的那种。",
    "如果一个人秒回了你，说明这个人在玩手机。",
    "比一个人吃火锅更寂寞的是，一个人没有钱吃火锅。",
    "别指望减肥了，八戒走了十万八千里也没见瘦下来。而且，他还吃素！",
    "别相信灰姑娘的童话，如果鞋子真的合脚，当时就不会掉下。",
    "春风十里也吹不动你。",
    "爱笑的女生运气不会太差，那是因为运气差的根本笑不出来。",
    "世上无难事，只怕有钱人。",
    "上帝为你关上一扇窗，还会为你带上门。",
    "对今天解决不了的事情，也不要着急。因为明天也还是解决不了。",
    "年轻人嘛，现在没钱算什么，以后没钱的日子还多着呢。",
  ]


  function Ajax(options) {
    //这个options时传入给ajax的配置参数
    return new Promise((resolve, reject) => {
      //返回一个promise对象 resolve成功是的处理，reject失败时的处理
      if (!options.url) { // 需要请求的路径
        console.log("请确认你的url路径");
        return;
      }
      let method = options.method || "GET"; //请求方式如果没有就默认为get
      let async = options.async || true; //ajax是否异步请求默认位true
      let xhr = new XMLHttpRequest();
      if (method === "GET") {
        xhr.open(method, options.url + "?" + Math.random(), async); //防止缓存
        xhr.send(null);
      } else if (method === "POST") {
        xhr.open(method, options.url, async);
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        xhr.send(options.data);
      }
      // xhr.responseType = options.type || "";

      xhr.onreadystatechange = () => {
        if (xhr.responseText) {
          //有数据说明相应成功
          resolve(xhr.responseText);
        }
      };
      xhr.onerror = err => {
        reject(err);
      };
    }).catch(e => { });
  }

  var index = 0
  function send() {
    let data = { text: list[index], typeId: "2" }
    Ajax({
      url: "http://localhost:3001/api/add_chicken_soup",
      method: "POST",
      data: JSON.stringify(data)
    }).then(res => {
      console.log(res)
      index++
      if (index <= list.length) {
        send()
      }
    }).catch(err => {
      index++
      console.log(err)
    })
  }
</script>

</html>